pipeline{
    agent any
    tools {
        maven 'maven'
        jdk 'java'
    }


    stages {

        stage ('Build'){
            steps {
                sh 'mvn clean install package'
            }
        }

        stage ('Deploy'){
            steps {
                step($class: 'AWSEBDeploymentBuilder',
                    credentialId: aws_credentials,
                    awsRegion: aws_region,
                    applicationName: aws_application_name,
                    environmentName: aws_environment_name,
                    keyPrefix: aws_key_prefix,
                    rootObject: aws_root_object,
                    versionLabelFormat: "-${BUILD_NUMBER}",
            }
        }
               
    }

}
